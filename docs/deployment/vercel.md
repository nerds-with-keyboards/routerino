# Deploying Routerino to Vercel

Deploy your Routerino static site to Vercel's resold AWS network.

## Prerequisites

- Routerino app with static generation configured
- GitHub, GitLab, or Bitbucket account
- Vercel account (free at vercel.com)

## Deployment Methods

### Method 1: Git Integration

#### Step 1: Prepare Your Project

1. Ensure your `package.json` has build scripts:

   ```json
   {
     "scripts": {
       "build": "vite build",
       "build:static": "routerino-build-static routesFile=src/routes.jsx outputDir=dist template=dist/index.html baseUrl=https://yourdomain.vercel.app",
       "build:sitemap": "routerino-build-sitemap routeFilePath=src/routes.jsx hostname=https://yourdomain.vercel.app outputDir=dist",
       "build:all": "npm run build && npm run build:static && npm run build:sitemap"
     }
   }
   ```

2. Create `vercel.json` in your project root:

   ```json
   {
     "buildCommand": "npm run build:all",
     "outputDirectory": "dist",
     "framework": null
   }
   ```

3. Commit and push your changes

#### Step 2: Import to Vercel

1. Go to [Vercel Dashboard](https://vercel.com/dashboard)
2. Click "Add New..." → "Project"
3. Import your Git repository
4. Vercel will detect settings from `vercel.json`
5. Click "Deploy"

### Method 2: Vercel CLI

1. Install Vercel CLI:

   ```bash
   npm install -g vercel
   ```

2. Build and deploy:

   ```bash
   npm run build:all
   vercel --prod
   ```

   Follow the prompts to link your project.

## Configuration

### Build Settings

In Project Settings → General:

- **Framework Preset**: Other
- **Build Command**: `npm run build:all`
- **Output Directory**: `dist`
- **Install Command**: `npm install`

### Environment Variables

Set any required variables in Project Settings → Environment Variables:

```
NODE_ENV=production
VITE_API_URL=https://api.yourdomain.com
```

### Domain Configuration

1. Go to Project Settings → Domains
2. Add your custom domain
3. Follow DNS instructions
4. SSL certificates are automatic

## Important Notes

### Static Routing

Since Routerino generates static HTML files, avoid SPA routing configuration:

❌ **Don't add**:

```json
{
  "rewrites": [{ "source": "/(.*)", "destination": "/index.html" }]
}
```

✅ **Do**: Let Vercel serve the generated HTML files directly

### Preview Deployments

To use preview URLs in builds:

```json
{
  "scripts": {
    "build:vercel": "npm run build && routerino-build-static routesFile=src/routes.jsx outputDir=dist template=dist/index.html baseUrl=${VERCEL_URL:-https://yourdomain.com}"
  }
}
```

Update `vercel.json`:

```json
{
  "buildCommand": "npm run build:vercel"
}
```

## Troubleshooting

### Build Failures

1. Ensure Node.js 18+ in package.json:

   ```json
   {
     "engines": {
       "node": ">=18"
     }
   }
   ```

2. Check build logs in the deployment

### 404 Errors

- Verify `404.html` is generated by `build:static`
- Check file paths in dist/
- Ensure no conflicting routing rules

### Environment Variables

- Use `VERCEL_URL` for preview deployments
- Redeploy after changing variables

## Project Structure

```
your-routerino-app/
├── src/
│   ├── routes.jsx
│   └── main.jsx
├── dist/             # Build output
│   ├── index.html
│   ├── about/index.html
│   ├── 404.html
│   ├── sitemap.xml
│   └── robots.txt
├── vercel.json
└── package.json
```

## Summary

Vercel provides automatic deployments from Git with preview URLs for every push. The platform handles static file serving efficiently through its edge network.
